<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>to do list</title>
        <style>
        body {
        background-image: url("https://backgrounddownload.com/wp-content/uploads/2018/09/background-a%C3%A7o-escovado-azul-8.jpg");
        font-family:'Lucida Sans', 'Lucida Sans Regular', sans-serif;
        height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        }

        .principal {
        width: 80vw;
        background-image: url("https://st2.depositphotos.com/1744844/6684/i/950/depositphotos_66846965-stock-photo-abstract-multicolor.jpg");
        border-radius: 50px;
        padding: 35px;
        }

        button {
        cursor: pointer;
        border-top: 1px solid #f797b2;
        background: #a1d665;
        background:-webkit-gradient(linear, left top, left bottom, from(#9c3e3e), to(#a1d665));
        background: -webkit-linear-gradient(top, #e1fa00bd, #a1d665);
        background: -moz-linear-gradient(top, #9c3e3e, #add4da);
        background: -ms-linear-gradient(top, #e1fa00bd, #cbeef37e);
        background: -o-linear-gradient(top, #e1fa00bd, #cbeef37e);
        padding: 9.5px 19px;
        -webkit-border-radius: 20px;
        -moz-border-radius: 20px;
        border-radius: 20px;
        -webkit-box-shadow: rgba(0,0,0,1) 0 1px 0;
        -moz-box-shadow: rgba(0,0,0,1) 0 1px 0;
        box-shadow: rgba(0,0,0,1) 0 1px 0;
        text-shadow: rgba(0,0,0,.4) 0 1px 0;
        color: #000000;
        font-size: 16px;
        font-family: Helvetica, Arial, Sans-Serif;
        text-decoration: none;
        vertical-align: middle;
        }

        button:hover {
        border-top-color: #786d28;
        background: #786d28;
        color: #cccccc;
        }

        button:active {
        border-top-color: #391b5c;
        background: #391b5c;
        }

        input {
        top: 51px;
        height: 29px;
        background:rgba(45, 45, 45, 0.52);
        border-radius: 16px;
        border: 1px solid #3d3d3d;
        border: 1px solid rgba(255,255,255,.15);
        box-shadow: 0 2px 3px 0 rgba(0,0,0,.1) inset;
        font-family: 'PT Sans', Helvetica;
        font-size: 14px;
        color: #fff;
        text-shadow: 0 1px 2px rgba(0,0,0,.1);
        }

        input:focus{
        border-color: rgb(39, 136, 0);
        border-block-start-color: aqua;
        border: 2px solid;
        }

        #selecionado{
            background-color: aqua;
        }

    </style>
</head>
<body>
    <div class="principal">
        <h2>Minha lista de tarefa</h2>
        <span>Clique duas vezes num item para marca-lo com completo</span><br>
        Adcione aqui→<input type="text" name="item" id="caixaTexto">
        <button onclick="minhaFunction()">Adcionar</button>
        
        <ol id="lista"></ol>
        <button onclick="apagar(selecionado)">X</button> 
        <button onclick="irParaCima()">⇈</button>
        <button onclick="irParaBaixo()">⇊</button>
        <button onclick="limparCompleto()">Limpar Completo</button>
        <button onclick="history.go(0)">Limpar Lista</button>
        <button onclick="salvarLista()">Salvar Lista</button>
    </div>
    <script>
        
        function apagar(id) {
            id.remove()
        }   
        
        function limparCompleto(){
            let pai = document.querySelector("#lista")
            //aqui foi a forma de pegar como se fosse uma pilha (usar o - para pegar decrescendo)
            let itensCriados = document.getElementsByTagName('li').length - 1
            let itensFeitos, i
            for (i = itensCriados; i >= 0; i--) {
                itensFeitos = document.getElementsByTagName('li')[i]
                if (itensFeitos.style.textDecoration == "line-through") {
                pai.removeChild(itensFeitos);
                }
                
            } 
        } 

        function irParaBaixo() {
            let papai = document.querySelector("#lista")
            let itemQueEstaAbaixo = selecionado.nextElementSibling
            papai.insertBefore(itemQueEstaAbaixo, selecionado)
        }

        function irParaCima() {
            let oPai = document.querySelector("#lista")
            let itemQueEstaAcima = selecionado.previousElementSibling
            oPai.insertBefore(selecionado, itemQueEstaAcima)
        }

        function adicionarElemento (item, pai) { 
            item.setAttribute("class", "listaItens")
            pai.appendChild(item)
            
        }

        function adcionarTexto(item, palavra) {
            item.insertAdjacentHTML('afterbegin', palavra)
        }

        function colocarId(itemId) {
            itemId.setAttribute("id", "selecionado")
            
        }

        function removerId(itemId) {
            itemId.setAttribute("id", "")
        }

        function escutarEventoClick(itemAdcionado) {
            itemAdcionado.addEventListener("click", function(){
                let idAnterior = document.getElementById('selecionado')
                if (idAnterior) {
                    removerId(idAnterior)   
                } 
                colocarId(itemAdcionado)
                selecionado = itemAdcionado
            })       
        }
        

        function escutarEventoDblClick(itemAdcionado) {
            itemAdcionado.addEventListener("dblclick", function(){
                if (itemAdcionado.style.textDecoration == "line-through") {
                    itemAdcionado.style.textDecoration = "none"
                } else {
                    itemAdcionado.style.textDecoration = "line-through"
                }
            })
        }

        function minhaFunction(){
            let caixaTexto = document.getElementById("caixaTexto")
            let listaPai = document.querySelector("#lista")
            let itemNovo = document.createElement("li")
            let listaDosItens = caixaTexto.value
            adicionarElemento (itemNovo, listaPai)
            adcionarTexto(itemNovo, listaDosItens)
            escutarEventoDblClick(itemNovo)
            escutarEventoClick(itemNovo)
            caixaTexto.value = ""
        }

    </script>
</body>
</html>